(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,48304,e=>{"use strict";var t=e.i(96647),s=e.i(50239);let r=(0,e.i(7247).default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);e.s(["TopBar",0,({title:e,showBack:a=!1,backPath:l,actions:i})=>{let n=(0,s.useRouter)();return(0,t.jsx)("header",{className:"sticky top-0 z-30 bg-[var(--color-bg-primary)]/95 backdrop-blur-md border-b border-[var(--color-border)]",children:(0,t.jsxs)("div",{className:"flex items-center justify-between h-[56px] px-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[a&&(0,t.jsx)("button",{onClick:()=>{l?n.push(l):n.back()},className:"flex items-center justify-center w-8 h-8 -ml-1 rounded-full hover:bg-[var(--color-bg-tertiary)] transition-colors",children:(0,t.jsx)(r,{size:24,className:"text-[var(--color-brand)]"})}),(0,t.jsx)("h1",{className:"text-lg font-semibold text-[var(--color-text-primary)] truncate",children:e})]}),i&&(0,t.jsx)("div",{className:"flex items-center gap-2 ml-2",children:i})]})})}],48304)},16113,e=>{"use strict";var t=e.i(96647),s=e.i(61693);let r={sm:"w-8 h-8 text-xs",md:"w-10 h-10 text-sm",lg:"w-12 h-12 text-base",xl:"w-[120px] h-[120px] text-2xl"};e.s(["Avatar",0,({src:e,name:a,size:l="md",className:i=""})=>{let n=(0,s.getInitials)(a);return(0,t.jsxs)("div",{className:`relative rounded-full overflow-hidden flex-shrink-0 flex items-center justify-center bg-[var(--color-bg-tertiary)] ${r[l]} ${i}`,children:[e?(0,t.jsx)("img",{src:e,alt:a,className:"w-full h-full object-cover",onError:e=>{let t=e.target;t.style.display="none";let s=t.parentElement;if(s){let e=s.querySelector("[data-fallback]");e&&(e.style.display="flex")}}}):null,(0,t.jsx)("span",{"data-fallback":!0,className:`absolute inset-0 flex items-center justify-center font-semibold text-[var(--color-text-secondary)] ${e?"hidden":"flex"}`,style:{display:e?"none":"flex"},children:n})]})}])},91700,e=>{"use strict";var t=e.i(96647),s=e.i(53459),r=e.i(24619),a=e.i(48304),l=e.i(16113),i=e.i(46949),n=e.i(50239),c=e.i(61693);function o(){let e=(0,n.useRouter)(),{conversations:o,contacts:d}=(0,i.useStore)(),m=(0,s.useMemo)(()=>[...o].sort((e,t)=>new Date(t.lastMessageAt).getTime()-new Date(e.lastMessageAt).getTime()),[o]);return(0,t.jsxs)("div",{className:"min-h-screen bg-[var(--color-bg-secondary)]",children:[(0,t.jsx)(a.TopBar,{title:"Messages"}),(0,t.jsxs)("div",{className:"px-4 pt-3 pb-4",children:[0===m.length&&(0,t.jsx)("div",{className:"text-center py-12",children:(0,t.jsx)("p",{className:"text-sm text-[var(--color-text-tertiary)]",children:"No conversations yet"})}),(0,t.jsx)("div",{className:"space-y-1",children:m.map((s,a)=>{let i=(e=>{if("group"===e.type)return{name:e.name??"Group Chat",avatar:void 0,initial:(e.name??"G")[0]};let t=e.participants.find(e=>"user_me"!==e),s=d.find(e=>e.id===t);return{name:s?.name??"Unknown",avatar:s?.avatar,initial:(s?.name??"U")[0]}})(s),n=(e=>{let t=e.messages[e.messages.length-1];if(!t)return"";let s="user_me"===t.senderId;return`${s?"You: ":""}${t.text}`})(s);return(0,t.jsxs)(r.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.04*a,duration:.3},onClick:()=>e.push(`/messages/${s.id}`),className:"flex items-center gap-3 p-3 rounded-[var(--radius-md)] bg-[var(--color-bg-primary)] cursor-pointer hover:bg-[var(--color-bg-tertiary)] transition-colors border border-[var(--color-border)]",children:[(0,t.jsx)(l.Avatar,{src:i.avatar,name:i.name,size:"lg"}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm font-semibold text-[var(--color-text-primary)] truncate",children:i.name}),(0,t.jsx)("span",{className:"text-xs text-[var(--color-text-tertiary)] flex-shrink-0 ml-2",children:(0,c.timeAgo)(s.lastMessageAt)})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between mt-0.5",children:[(0,t.jsx)("p",{className:"text-xs text-[var(--color-text-secondary)] truncate flex-1",children:n}),s.unreadCount>0&&(0,t.jsx)("span",{className:"ml-2 flex-shrink-0 w-5 h-5 rounded-full bg-red-500 text-white text-[11px] font-semibold flex items-center justify-center",children:s.unreadCount})]})]})]},s.id)})})]})]})}e.s(["default",()=>o])}]);