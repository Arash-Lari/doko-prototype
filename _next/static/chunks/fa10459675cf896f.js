(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,48304,e=>{"use strict";var t=e.i(96647),r=e.i(50239);let s=(0,e.i(7247).default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);e.s(["TopBar",0,({title:e,showBack:a=!1,backPath:i,actions:l})=>{let o=(0,r.useRouter)();return(0,t.jsx)("header",{className:"sticky top-0 z-30 bg-[var(--color-bg-primary)]/95 backdrop-blur-md border-b border-[var(--color-border)]",children:(0,t.jsxs)("div",{className:"flex items-center justify-between h-[56px] px-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[a&&(0,t.jsx)("button",{onClick:()=>{i?o.push(i):o.back()},className:"flex items-center justify-center w-8 h-8 -ml-1 rounded-full hover:bg-[var(--color-bg-tertiary)] transition-colors",children:(0,t.jsx)(s,{size:24,className:"text-[var(--color-brand)]"})}),(0,t.jsx)("h1",{className:"text-lg font-semibold text-[var(--color-text-primary)] truncate",children:e})]}),l&&(0,t.jsx)("div",{className:"flex items-center gap-2 ml-2",children:l})]})})}],48304)},76846,e=>{"use strict";var t=e.i(96647),r=e.i(53459),s=e.i(24619),a=e.i(48304),i=e.i(46949);let l=(0,e.i(7247).default)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);function o({params:e}){let{id:o}=(0,r.use)(e),{conversations:n,contacts:c}=(0,i.useStore)(),d=(0,r.useRef)(null),m=(0,r.useMemo)(()=>n.find(e=>e.id===o),[n,o]),x=m?.type==="group",u=(0,r.useMemo)(()=>{if(!m)return"Chat";if("group"===m.type)return m.name??"Group Chat";let e=m.participants.find(e=>"user_me"!==e),t=c.find(t=>t.id===e);return t?.name??"Chat"},[m,c]);return((0,r.useEffect)(()=>{d.current?.scrollIntoView({behavior:"smooth"})},[m?.messages]),m)?(0,t.jsxs)("div",{className:"min-h-screen bg-[var(--color-bg-secondary)] flex flex-col",children:[(0,t.jsx)(a.TopBar,{title:u,showBack:!0,backPath:"/messages"}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto px-4 pt-3 pb-4 space-y-2",children:[m.messages.map((e,r)=>{let a,i="user_me"===e.senderId;return(0,t.jsx)(s.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.03*r,duration:.2},className:`flex ${i?"justify-end":"justify-start"}`,children:(0,t.jsxs)("div",{className:`max-w-[75%] rounded-[var(--radius-lg)] px-3.5 py-2.5 ${i?"bg-[var(--color-brand)] text-white rounded-br-sm":"bg-[var(--color-bg-tertiary)] text-[var(--color-text-primary)] rounded-bl-sm"}`,children:[x&&!i&&(0,t.jsx)("p",{className:"text-[11px] font-semibold mb-0.5 text-[var(--color-brand)]",children:(e=>{if("user_me"===e)return"You";let t=c.find(t=>t.id===e);return t?.name??"Unknown"})(e.senderId)}),(0,t.jsx)("p",{className:"text-sm leading-relaxed",children:e.text}),(0,t.jsx)("p",{className:`text-[10px] mt-1 text-right ${i?"text-white/70":"text-[var(--color-text-tertiary)]"}`,children:(a=new Date(e.timestamp),new Intl.DateTimeFormat("en-GB",{hour:"2-digit",minute:"2-digit"}).format(a))})]})},e.id)}),(0,t.jsx)("div",{ref:d})]}),(0,t.jsx)("div",{className:"sticky bottom-0 bg-[var(--color-bg-primary)] border-t border-[var(--color-border)] px-4 py-3",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"text",placeholder:"Type a message...",className:"flex-1 bg-[var(--color-bg-tertiary)] rounded-full px-4 py-2.5 text-sm text-[var(--color-text-primary)] placeholder:text-[var(--color-text-tertiary)] outline-none focus:ring-2 focus:ring-[var(--color-brand)]/20"}),(0,t.jsx)("button",{className:"w-10 h-10 rounded-full bg-[var(--color-brand)] flex items-center justify-center flex-shrink-0",children:(0,t.jsx)(l,{size:18,className:"text-white ml-0.5"})})]})})]}):(0,t.jsxs)("div",{className:"min-h-screen bg-[var(--color-bg-primary)]",children:[(0,t.jsx)(a.TopBar,{title:"Chat",showBack:!0,backPath:"/messages"}),(0,t.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,t.jsx)("p",{className:"text-sm text-[var(--color-text-tertiary)]",children:"Conversation not found"})})]})}e.s(["default",()=>o],76846)}]);