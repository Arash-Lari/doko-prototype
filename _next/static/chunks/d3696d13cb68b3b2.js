(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,48304,e=>{"use strict";var t=e.i(96647),r=e.i(50239);let s=(0,e.i(7247).default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);e.s(["TopBar",0,({title:e,showBack:a=!1,backPath:l,actions:i})=>{let n=(0,r.useRouter)();return(0,t.jsx)("header",{className:"sticky top-0 z-30 bg-[var(--color-bg-primary)]/95 backdrop-blur-md border-b border-[var(--color-border)]",children:(0,t.jsxs)("div",{className:"flex items-center justify-between h-[56px] px-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[a&&(0,t.jsx)("button",{onClick:()=>{l?n.push(l):n.back()},className:"flex items-center justify-center w-8 h-8 -ml-1 rounded-full hover:bg-[var(--color-bg-tertiary)] transition-colors",children:(0,t.jsx)(s,{size:24,className:"text-[var(--color-brand)]"})}),(0,t.jsx)("h1",{className:"text-lg font-semibold text-[var(--color-text-primary)] truncate",children:e})]}),i&&(0,t.jsx)("div",{className:"flex items-center gap-2 ml-2",children:i})]})})}],48304)},16113,e=>{"use strict";var t=e.i(96647),r=e.i(61693);let s={sm:"w-8 h-8 text-xs",md:"w-10 h-10 text-sm",lg:"w-12 h-12 text-base",xl:"w-[120px] h-[120px] text-2xl"};e.s(["Avatar",0,({src:e,name:a,size:l="md",className:i=""})=>{let n=(0,r.getInitials)(a);return(0,t.jsxs)("div",{className:`relative rounded-full overflow-hidden flex-shrink-0 flex items-center justify-center bg-[var(--color-bg-tertiary)] ${s[l]} ${i}`,children:[e?(0,t.jsx)("img",{src:e,alt:a,className:"w-full h-full object-cover",onError:e=>{let t=e.target;t.style.display="none";let r=t.parentElement;if(r){let e=r.querySelector("[data-fallback]");e&&(e.style.display="flex")}}}):null,(0,t.jsx)("span",{"data-fallback":!0,className:`absolute inset-0 flex items-center justify-center font-semibold text-[var(--color-text-secondary)] ${e?"hidden":"flex"}`,style:{display:e?"none":"flex"},children:n})]})}])},42059,e=>{"use strict";let t=(0,e.i(7247).default)("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]]);e.s(["MessageCircle",()=>t],42059)},88069,e=>{"use strict";let t=(0,e.i(7247).default)("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]);e.s(["Sparkles",()=>t],88069)},60421,e=>{"use strict";let t=(0,e.i(7247).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>t],60421)},9347,e=>{"use strict";let t=(0,e.i(7247).default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);e.s(["X",()=>t],9347)},8719,e=>{"use strict";let t=(0,e.i(7247).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],8719)},44727,e=>{"use strict";e.i(89152);var t=e.i(96647),r=e.i(53459),s=e.i(53695),a=e.i(68787),l=e.i(46992),i=e.i(59824),n=e.i(60247),o=r,c=e.i(9423);function d(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}class m extends o.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent&&!1!==this.props.pop){let e=t.offsetParent,r=(0,n.isHTMLElement)(e)&&e.offsetWidth||0,s=(0,n.isHTMLElement)(e)&&e.offsetHeight||0,a=this.props.sizeRef.current;a.height=t.offsetHeight||0,a.width=t.offsetWidth||0,a.top=t.offsetTop,a.left=t.offsetLeft,a.right=r-a.width-a.left,a.bottom=s-a.height-a.top}return null}componentDidUpdate(){}render(){return this.props.children}}function p({children:e,isPresent:s,anchorX:a,anchorY:l,root:i,pop:n}){let p=(0,o.useId)(),x=(0,o.useRef)(null),u=(0,o.useRef)({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:h}=(0,o.useContext)(c.MotionConfigContext),f=function(...e){return r.useCallback(function(...e){return t=>{let r=!1,s=e.map(e=>{let s=d(e,t);return r||"function"!=typeof s||(r=!0),s});if(r)return()=>{for(let t=0;t<s.length;t++){let r=s[t];"function"==typeof r?r():d(e[t],null)}}}}(...e),e)}(x,e.props?.ref??e?.ref);return(0,o.useInsertionEffect)(()=>{let{width:e,height:t,top:r,left:o,right:c,bottom:d}=u.current;if(s||!1===n||!x.current||!e||!t)return;let m="left"===a?`left: ${o}`:`right: ${c}`,f="bottom"===l?`bottom: ${d}`:`top: ${r}`;x.current.dataset.motionPopId=p;let v=document.createElement("style");h&&(v.nonce=h);let y=i??document.head;return y.appendChild(v),v.sheet&&v.sheet.insertRule(`
          [data-motion-pop-id="${p}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${t}px !important;
            ${m}px !important;
            ${f}px !important;
          }
        `),()=>{y.contains(v)&&y.removeChild(v)}},[s]),(0,t.jsx)(m,{isPresent:s,childRef:x,sizeRef:u,pop:n,children:!1===n?e:o.cloneElement(e,{ref:f})})}let x=({children:e,initial:s,isPresent:l,onExitComplete:n,custom:o,presenceAffectsLayout:c,mode:d,anchorX:m,anchorY:x,root:h})=>{let f=(0,a.useConstant)(u),v=(0,r.useId)(),y=!0,b=(0,r.useMemo)(()=>(y=!1,{id:v,initial:s,isPresent:l,custom:o,onExitComplete:e=>{for(let t of(f.set(e,!0),f.values()))if(!t)return;n&&n()},register:e=>(f.set(e,!1),()=>f.delete(e))}),[l,f,n]);return c&&y&&(b={...b}),(0,r.useMemo)(()=>{f.forEach((e,t)=>f.set(t,!1))},[l]),r.useEffect(()=>{l||f.size||!n||n()},[l]),e=(0,t.jsx)(p,{pop:"popLayout"===d,isPresent:l,anchorX:m,anchorY:x,root:h,children:e}),(0,t.jsx)(i.PresenceContext.Provider,{value:b,children:e})};function u(){return new Map}var h=e.i(56310);let f=e=>e.key||"";function v(e){let t=[];return r.Children.forEach(e,e=>{(0,r.isValidElement)(e)&&t.push(e)}),t}let y=({children:e,custom:i,initial:n=!0,onExitComplete:o,presenceAffectsLayout:c=!0,mode:d="sync",propagate:m=!1,anchorX:p="left",anchorY:u="top",root:y})=>{let[b,g]=(0,h.usePresence)(m),j=(0,r.useMemo)(()=>v(e),[e]),k=m&&!b?[]:j.map(f),w=(0,r.useRef)(!0),N=(0,r.useRef)(j),C=(0,a.useConstant)(()=>new Map),M=(0,r.useRef)(new Set),[P,E]=(0,r.useState)(j),[S,z]=(0,r.useState)(j);(0,l.useIsomorphicLayoutEffect)(()=>{w.current=!1,N.current=j;for(let e=0;e<S.length;e++){let t=f(S[e]);k.includes(t)?(C.delete(t),M.current.delete(t)):!0!==C.get(t)&&C.set(t,!1)}},[S,k.length,k.join("-")]);let R=[];if(j!==P){let e=[...j];for(let t=0;t<S.length;t++){let r=S[t],s=f(r);k.includes(s)||(e.splice(t,0,r),R.push(r))}return"wait"===d&&R.length&&(e=R),z(v(e)),E(j),null}let{forceRender:T}=(0,r.useContext)(s.LayoutGroupContext);return(0,t.jsx)(t.Fragment,{children:S.map(e=>{let r=f(e),s=(!m||!!b)&&(j===S||k.includes(r));return(0,t.jsx)(x,{isPresent:s,initial:(!w.current||!!n)&&void 0,custom:i,presenceAffectsLayout:c,mode:d,root:y,onExitComplete:s?void 0:()=>{if(M.current.has(r)||(M.current.add(r),!C.has(r)))return;C.set(r,!0);let e=!0;C.forEach(t=>{t||(e=!1)}),e&&(T?.(),z(N.current),m&&g?.(),o&&o())},anchorX:p,anchorY:u,children:e},r)})})};e.s(["AnimatePresence",()=>y],44727)},17747,e=>{"use strict";var t=e.i(96647),r=e.i(61693);let s={default:"bg-[var(--color-bg-tertiary)] text-[var(--color-text-secondary)]",brand:"bg-[var(--color-brand-light)] text-[var(--color-brand)]",success:"bg-emerald-50 text-emerald-600 dark:bg-emerald-950 dark:text-emerald-400",warning:"bg-amber-50 text-amber-600 dark:bg-amber-950 dark:text-amber-400",error:"bg-red-50 text-red-600 dark:bg-red-950 dark:text-red-400"},a={sm:"px-2 py-0.5 text-[11px]",md:"px-2.5 py-1 text-xs"};e.s(["Badge",0,({text:e,variant:l="default",size:i="sm",className:n=""})=>(0,t.jsx)("span",{className:(0,r.cn)("inline-flex items-center font-medium rounded-full whitespace-nowrap",s[l],a[i],n),children:e})])},50255,e=>{"use strict";var t=e.i(96647),r=e.i(53459),s=e.i(8719),a=e.i(42059);let l=(0,e.i(7247).default)("calendar-plus",[["path",{d:"M16 19h6",key:"xwg31i"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M19 16v6",key:"tddt3s"}],["path",{d:"M21 12.598V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8.5",key:"1glfrc"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}]]);var i=e.i(58426),n=e.i(9347),o=e.i(24619),c=e.i(44727),d=e.i(50239);e.s(["FAB",0,({variant:e="daily"})=>{let[m,p]=(0,r.useState)(!1),x=(0,d.useRouter)(),u={daily:[{id:"moment",label:"New Moment",icon:a.MessageCircle,onClick:()=>x.push("/daily?compose=moment")},{id:"plan",label:"New Plan",icon:l,onClick:()=>x.push("/plans/new")},{id:"event",label:"New Event",icon:i.MapPin,onClick:()=>x.push("/places/new")}],plans:[{id:"plan",label:"New Plan",icon:l,onClick:()=>x.push("/plans/new")}],places:[{id:"event",label:"Host Event",icon:i.MapPin,onClick:()=>x.push("/places/new")}]},h=u[e]??u.daily,f=1===h.length;return(0,t.jsxs)("div",{className:"fixed bottom-[100px] right-4 z-30 max-w-[390px]",children:[(0,t.jsx)(c.AnimatePresence,{children:m&&!f&&(0,t.jsx)(o.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"absolute bottom-[60px] right-0 flex flex-col gap-2 items-end",children:h.map((e,r)=>{let s=e.icon;return(0,t.jsxs)(o.motion.button,{initial:{opacity:0,scale:.8,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:10},transition:{delay:.05*r},onClick:()=>{e.onClick(),p(!1)},className:"flex items-center gap-2 px-4 py-2.5 bg-[var(--color-bg-primary)] rounded-full shadow-lg border border-[var(--color-border)]",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-[var(--color-text-primary)] whitespace-nowrap",children:e.label}),(0,t.jsx)(s,{size:18,className:"text-[var(--color-brand)]"})]},e.id)})})}),(0,t.jsx)(o.motion.button,{whileTap:{scale:.9},onClick:()=>{f?h[0].onClick():p(!m)},className:"w-14 h-14 rounded-full bg-[var(--color-brand)] text-white flex items-center justify-center shadow-lg",children:(0,t.jsx)(o.motion.div,{animate:{rotate:45*!!m},transition:{duration:.2},children:m?(0,t.jsx)(n.X,{size:24}):(0,t.jsx)(s.Plus,{size:24})})})]})}],50255)},61772,e=>{"use strict";var t=e.i(96647),r=e.i(53459),s=e.i(24619),a=e.i(48304),l=e.i(50255),i=e.i(17747),n=e.i(16113),o=e.i(46949),c=e.i(50239),d=e.i(61693),m=e.i(58426),p=e.i(60421),x=e.i(88069);function u(){let e=(0,c.useRouter)(),{plans:u,contacts:h}=(0,o.useStore)(),f=(0,r.useMemo)(()=>u.filter(e=>"user_me"===e.userId),[u]),v=(0,r.useMemo)(()=>u.filter(e=>"user_me"!==e.userId),[u]),y={short_trip:"Short Trip",long_trip:"Long Trip",event:"Event",work_travel:"Work Travel"};return(0,t.jsxs)("div",{className:"min-h-screen bg-[var(--color-bg-secondary)]",children:[(0,t.jsx)(a.TopBar,{title:"Plans"}),(0,t.jsxs)("div",{className:"px-4 pt-3 pb-4 space-y-4",children:[(0,t.jsxs)("section",{children:[(0,t.jsx)("h3",{className:"text-xs font-semibold text-[var(--color-text-secondary)] uppercase tracking-wider mb-2",children:"My Plans"}),f.map((e,r)=>(0,t.jsxs)(s.motion.div,{initial:{opacity:0,y:15},animate:{opacity:1,y:0},transition:{delay:.05*r},className:"bg-[var(--color-bg-primary)] rounded-[var(--radius-lg)] p-4 border border-[var(--color-border)] shadow-[var(--shadow-sm)] mb-3",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-[var(--radius-md)] bg-[var(--color-brand-light)] flex items-center justify-center",children:(0,t.jsx)(m.MapPin,{size:22,className:"text-[var(--color-brand)]"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-base font-semibold text-[var(--color-text-primary)]",children:e.destination}),(0,t.jsxs)("div",{className:"flex items-center gap-1 mt-0.5",children:[(0,t.jsx)(p.Calendar,{size:12,className:"text-[var(--color-text-tertiary)]"}),(0,t.jsxs)("span",{className:"text-xs text-[var(--color-text-secondary)]",children:[(0,d.formatDateShort)(e.dates.start)," – ",(0,d.formatDateShort)(e.dates.end)]})]})]})]}),(0,t.jsx)(i.Badge,{text:y[e.type]??e.type})]}),e.notes&&(0,t.jsx)("p",{className:"text-sm text-[var(--color-text-secondary)] mt-3",children:e.notes}),(0,t.jsx)("div",{className:"flex items-center gap-2 mt-3",children:(0,t.jsx)(i.Badge,{text:"all_contacts"===e.visibility?"All Contacts":e.visibility.replace("_"," "),variant:"default"})}),e.overlaps&&e.overlaps.length>0&&(0,t.jsxs)("div",{className:"mt-3 pt-3 border-t border-[var(--color-border)]",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1 mb-2",children:[(0,t.jsx)(x.Sparkles,{size:14,className:"text-[var(--color-brand)]"}),(0,t.jsxs)("span",{className:"text-xs font-semibold text-[var(--color-brand)]",children:[e.overlaps.length," Overlap",e.overlaps.length>1?"s":""," Found!"]})]}),e.overlaps.map(e=>{let r=h.find(t=>t.id===e.contactId);return(0,t.jsxs)("div",{className:"flex items-center gap-2 bg-[var(--color-brand-light)] rounded-[var(--radius-sm)] p-2 mb-1",children:[(0,t.jsx)(n.Avatar,{src:r?.avatar,name:e.contactName,size:"sm"}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-[var(--color-text-primary)]",children:e.contactName}),(0,t.jsxs)("p",{className:"text-xs text-[var(--color-text-secondary)]",children:[e.overlapDays," days overlap ·"," ",(0,d.formatDateShort)(e.overlapDates.start)," –"," ",(0,d.formatDateShort)(e.overlapDates.end)]})]})]},e.contactId)})]})]},e.id))]}),v.length>0&&(0,t.jsxs)("section",{children:[(0,t.jsx)("h3",{className:"text-xs font-semibold text-[var(--color-text-secondary)] uppercase tracking-wider mb-2",children:"Friends' Plans"}),v.map((r,a)=>{let l=h.find(e=>e.id===r.userId);return(0,t.jsx)(s.motion.div,{initial:{opacity:0,y:15},animate:{opacity:1,y:0},transition:{delay:(f.length+a)*.05},onClick:()=>l&&e.push(`/contacts/${l.id}`),className:"bg-[var(--color-bg-primary)] rounded-[var(--radius-md)] p-3 border border-[var(--color-border)] mb-2 cursor-pointer",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(n.Avatar,{src:l?.avatar,name:l?.name??"Unknown",size:"md"}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("p",{className:"text-sm font-semibold text-[var(--color-text-primary)]",children:[l?.name," → ",r.destination]}),(0,t.jsxs)("p",{className:"text-xs text-[var(--color-text-secondary)]",children:[(0,d.formatDateShort)(r.dates.start)," – ",(0,d.formatDateShort)(r.dates.end)]})]}),(0,t.jsx)(i.Badge,{text:y[r.type]??r.type})]})},r.id)})]})]}),(0,t.jsx)(l.FAB,{variant:"plans"})]})}e.s(["default",()=>u])}]);